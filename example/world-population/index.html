<head>
  <style> body { margin: 0; } </style>

  <script src="//unpkg.com/d3-dsv"></script>
  <script src="//unpkg.com/chroma-js"></script>
  <script src="//unpkg.com/globe.gl"></script>
  <!--<script src="../../dist/globe.gl.js"></script>-->

</head>

<body>
<div id="globeViz"></div>

<script>
  fetch('./population2000.csv').then(res => res.text())
    .then(csv => d3.csvParse(csv, d => ({
      lat: +d.lat,
      lng: +d.lng,
      pop: +d.value
    })))
    .then(data => {
      const globe = Globe()
        .globeImageUrl('//unpkg.com/three-globe/example/img/earth-dark.jpg')
        .bumpImageUrl('//unpkg.com/three-globe/example/img/earth-topology.png')        .pointsData(data)
        .pointAltitude(d => d.pop)
        .pointRadius(0.12)
        .pointColor(d => chroma.hsl((0.6 - d.pop * 0.5) * 360, 1.0, 0.5).hex())
        .pointsMerge(true) // rendering performance
        .enablePointerInteraction(false)
        (document.getElementById('globeViz'));

      // Add auto-rotation
      globe.controls().autoRotate = true;
      globe.controls().autoRotateSpeed = 0.3;
    });

</script>
</body>